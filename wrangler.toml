# Cloudflare Wrangler 配置文件
# @see https://developers.cloudflare.com/workers/wrangler/configuration/

# 项目名称，通常与 package.json 中的 name 字段一致
name = "api-check"

# Worker 的主入口文件，包含 Worker 的核心逻辑
main = "src/index.js"

# 兼容性日期，用于确保 Worker 行为与特定日期后的运行时行为兼容
compatibility_date = "2026-01-01"

# 静态资源配置，指向前端构建后的输出目录
[assets]
directory = "./frontend/dist"

# 可观测性配置，用于 Workers Insights 和日志
# [observability]
# enabled = true # 启用可观测性
# head_sampling_rate = 1 # 日志采样率，1 表示 100% 采样

# Durable Objects 绑定配置
# REGIONAL_FETCHER 是一个 Durable Object，用于实现区域性请求代理
[[durable_objects.bindings]]
name = "REGIONAL_FETCHER" # 绑定名称，在 Worker 代码中通过 env.REGIONAL_FETCHER 访问
class_name = "RegionalFetcher" # 对应的 Durable Object 类名

# 数据库迁移配置，用于 Durable Object 的存储
[[migrations]]
tag = "v1" # 迁移标签
new_sqlite_classes = ["RegionalFetcher"] # 声明新的 Durable Object 类，需要 SQLite 存储

# 环境变量配置
[vars]
# 允许的 CORS 来源白名单，多个来源用逗号分隔的 JSON 字符串数组表示
ALLOWED_ORIGINS = "[https://*.workers.dev\"]"
# 是否启用 User-Agent 随机化，用于模拟不同客户端，默认为 "true"
ENABLE_UA_RANDOMIZATION = "true"
# 是否启用 Accept-Language 随机化，用于模拟不同语言偏好，默认为 "true"
ENABLE_ACCEPT_LANGUAGE_RANDOMIZATION = "true"
